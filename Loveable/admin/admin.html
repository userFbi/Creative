<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Expense Manager</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Inter', sans-serif;
      }

      body {
        background-color: #f9fafb;
        color: #111827;
      }
      .custom-nav {
        font-family: 'Inter', sans-serif;
        font-size: 14px;
      }

      .custom-logo {
        width: 32px;
        height: 32px;
        background-color: #1f2937;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
      }

      /* Optional: Active state styling (manually add .active to link) */
      .nav-link.active {
        color: #0d6efd !important;
        font-weight: 600;
      }

      .container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.03);
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header i {
        font-size: 32px;
        color: #6b7280;
      }

      .header h1 {
        font-size: 28px;
        margin-top: 10px;
      }

      .header p {
        font-size: 14px;
        color: #6b7280;
      }

      .stats {
        display: flex;
        gap: 20px;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .stat-card {
        flex: 1;
        background-color: #f3f4f6;
        border-radius: 10px;
        padding: 20px;
      }

      .stat-card h2 {
        font-size: 24px;
        font-weight: 700;
      }

      .stat-card p {
        font-size: 13px;
        color: #6b7280;
        margin-top: 5px;
      }

      .blue-text {
        color: #3b82f6;
      }

      .orange-text {
        color: #f59f0b;
      }

      .add-expense-btn {
        margin: 30px 0;
        display: flex;
        justify-content: center;
      }

      .add-expense-btn button {
        background-color: #1f2937;
        color: white;
        padding: 12px 24px;
        border: none;
        font-size: 14px;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .add-expense-btn button:hover {
        background-color: #111827;
      }

      .form-section {
        display: none;
        background-color: #f9fafb;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border-radius: 6px;
        border: 1px solid #d1d5db;
        font-size: 14px;
        transition: border-color 0.2s ease;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 4px #3b82f6;
      }

      .form-actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      .form-actions button {
        padding: 10px 20px;
        font-size: 14px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      .add-btn {
        background-color: #1f2937;
        color: white;
      }

      .add-btn:hover {
        background-color: #111827;
      }

      .cancel-btn {
        background-color: #e5e7eb;
        color: #111827;
      }

      .cancel-btn:hover {
        background-color: #d1d5db;
      }

      .transaction-history h2 {
        font-size: 20px;
        margin-bottom: 10px;
      }

      .record-count {
        font-size: 14px;
        color: #6b7280;
        float: right;
      }

      .transaction {
        background-color: #f9fafb;
        padding: 15px 20px;
        border-left: 5px solid #d1d5db;
        margin-bottom: 15px;
        border-radius: 8px;
        transition: box-shadow 0.2s ease;
      }

      .transaction:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .transaction .category {
        font-size: 12px;
        background-color: #e5e7eb;
        padding: 4px 8px;
        border-radius: 12px;
        display: inline-block;
        margin-bottom: 6px;
      }

      .transaction .title {
        font-weight: 600;
        font-size: 15px;
      }

      .transaction .amount {
        float: right;
        font-size: 15px;
        font-weight: 600;
      }

      .transaction .meta {
        font-size: 13px;
        color: #6b7280;
        margin-bottom: 5px;
      }

      .footer-bar {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        color: #6b7280;
        margin-top: 40px;
        padding-top: 10px;
        border-top: 1px solid #e5e7eb;
      }

      .footer-bar i {
        margin-right: 6px;
      }

      /* Responsive fixes */
      @media (max-width: 768px) {
        .stats {
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav
      class="custom-nav navbar navbar-expand-md bg-white shadow-sm border-bottom fixed-top px-4"
    >
      <div
        class="container-fluid d-flex justify-content-between align-items-center"
      >
        <!-- Left: Logo -->
        <div class="d-flex align-items-center gap-2">
          <div class="custom-logo">
            <i class="bi bi-coin"></i>
          </div>
          <div class="d-flex flex-column">
            <span class="fw-bold text-dark" style="font-size: 16px"
              >Festival</span
            >
            <span class="text-muted small" style="margin-top: -4px"
              >Expense Manager</span
            >
          </div>
        </div>

        <!-- Center: Navigation Items -->
        <ul
          class="navbar-nav d-none d-md-flex align-items-center gap-3 mx-auto"
        >
          <li class="nav-item">
            <a
              class="nav-link text-muted px-3 py-1 rounded fw-medium d-flex align-items-center gap-1 active"
              href="#dashboard"
            >
              <i class="bi bi-speedometer2"></i>
              <span>Dashboard</span>
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link text-muted px-3 py-1 rounded fw-medium d-flex align-items-center gap-1"
              href="#add"
            >
              <i class="bi bi-plus-circle"></i>
              <span>Add Transaction</span>
            </a>
          </li>
          <li class="nav-item">
            <a
              class="nav-link text-muted px-3 py-1 rounded fw-medium d-flex align-items-center gap-1"
              href="#reports"
            >
              <i class="bi bi-bar-chart-line"></i>
              <span>Reports</span>
            </a>
          </li>
        </ul>

        <!-- Right: Profile Icon -->
        <div class="d-none d-md-flex">
          <button class="btn btn-light rounded-circle ms-3">
            <i class="bi bi-person text-muted"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Mobile Bottom Navigation -->
    <nav
      class="custom-nav navbar bg-white fixed-bottom border-top d-md-none py-2"
    >
      <div class="container-fluid d-flex justify-content-around">
        <a
          href="#dashboard"
          class="text-center text-primary small d-flex flex-column align-items-center"
        >
          <i class="bi bi-speedometer2 fs-5"></i>
          <span>Dashboard</span>
        </a>
        <a
          href="#add"
          class="text-center text-muted small d-flex flex-column align-items-center"
        >
          <i class="bi bi-plus-circle fs-5"></i>
          <span>Add</span>
        </a>
        <a
          href="#reports"
          class="text-center text-muted small d-flex flex-column align-items-center"
        >
          <i class="bi bi-bar-chart-line fs-5"></i>
          <span>Reports</span>
        </a>
      </div>
    </nav>

    <!-- Spacer for fixed navbar -->
    <div style="height: 64px"></div>

    <div class="container">
      <div class="header" id="dashboard">
        <i class="fas fa-calculator"></i>
        <h1>Expense Manager</h1>
        <p>
          Professional expense tracking and management system. Keep your
          finances organized with detailed categorization and insights.
        </p>
      </div>

      <!-- Stats -->
      <div class="stats">
        <div class="stat-card">
          <p>Total Balance</p>
          <h2 id="total-balance">$0.00</h2>
        </div>
        <div class="stat-card">
          <p>Total Income</p>
          <h2 class="blue-text" id="total-income">$0.00</h2>
        </div>
        <div class="stat-card">
          <p>Total Expenses</p>
          <h2 class="orange-text" id="total-expenses">$0.00</h2>
        </div>
      </div>

      <!-- Add Expense Button -->
      <div class="add-expense-btn" id="add">
        <button id="toggle-form-btn">+ Add New Transaction</button>
      </div>

      <!-- Expense Form -->
      <div class="form-section" style="display: none">
        <div class="form-group">
          <input
            type="text"
            id="expense-title"
            placeholder="Enter transaction title"
          />
        </div>
        <div class="form-group">
          <input type="number" id="expense-amount" placeholder="Amount ($)" />
        </div>
        <div class="form-group">
          <select id="expense-category">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
          </select>
        </div>
        <div class="form-group">
          <textarea
            id="expense-details"
            placeholder="Additional details about this transaction..."
          ></textarea>
        </div>
        <div class="form-actions">
          <button class="add-btn" id="add-expense-btn">Add Transaction</button>
          <button class="cancel-btn" id="cancel-btn">Cancel</button>
        </div>
      </div>

      <!-- Transaction History -->
      <div class="transaction-history" id="reports">
        <h2>
          Transaction History
          <span class="record-count" id="record-count">0 records</span>
        </h2>
        <div id="transaction-list">
          <!-- Transactions will be inserted here dynamically -->
        </div>
      </div>

      <!-- Footer bar -->
      <div class="footer-bar">
        <div><i class="fas fa-cloud-showers-heavy"></i> 1 cm of rain Sun</div>
        <div><i class="fas fa-temperature-high"></i> 27°C</div>
        <div><i class="fas fa-wind"></i> 5 km/h wind</div>
      </div>
    </div>

    <script>
      // Load transactions from localStorage or start with empty array
      let transactions = JSON.parse(localStorage.getItem('transactions')) || []

      // Convert transaction date strings back to Date objects
      transactions = transactions.map(tx => {
        return { ...tx, date: new Date(tx.date) }
      })

      const totalBalanceEl = document.getElementById('total-balance')
      const totalIncomeEl = document.getElementById('total-income')
      const totalExpensesEl = document.getElementById('total-expenses')
      const transactionListEl = document.getElementById('transaction-list')
      const recordCountEl = document.getElementById('record-count')

      const formSection = document.querySelector('.form-section')
      const toggleFormBtn = document.getElementById('toggle-form-btn')
      const addExpenseBtn = document.getElementById('add-expense-btn')
      const cancelBtn = document.getElementById('cancel-btn')

      const expenseTitleInput = document.getElementById('expense-title')
      const expenseAmountInput = document.getElementById('expense-amount')
      const expenseCategoryInput = document.getElementById('expense-category')
      const expenseDetailsInput = document.getElementById('expense-details')

      // Toggle form visibility
      toggleFormBtn.addEventListener('click', () => {
        if (
          formSection.style.display === 'none' ||
          formSection.style.display === ''
        ) {
          formSection.style.display = 'block'
          toggleFormBtn.style.display = 'none'
        }
      })

      cancelBtn.addEventListener('click', () => {
        formSection.style.display = 'none'
        toggleFormBtn.style.display = 'block'
        clearForm()
      })

      // Format date like "Sep 30, 2025 14:10"
      function formatDate(date) {
        const options = {
          year: 'numeric',
          month: 'short',
          day: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        }
        return date.toLocaleDateString('en-US', options)
      }

      // Clear form inputs
      function clearForm() {
        expenseTitleInput.value = ''
        expenseAmountInput.value = ''
        expenseCategoryInput.value = 'income'
        expenseDetailsInput.value = ''
      }

      // Update stats and transactions list
      function updateUI() {
        let totalIncome = 0
        let totalExpenses = 0

        transactionListEl.innerHTML = ''

        transactions.forEach(tx => {
          if (tx.category === 'income') {
            totalIncome += tx.amount
          } else {
            totalExpenses += tx.amount
          }

          const transactionEl = document.createElement('div')
          transactionEl.classList.add('transaction')

          // Color border for income vs expense
          transactionEl.style.borderLeftColor =
            tx.category === 'income' ? '#3b82f6' : '#f59e0b'

          transactionEl.innerHTML = `
            <div class="category">${tx.category}</div>
            <div class="title">${tx.title}</div>
            <div class="amount" style="color: ${
              tx.category === 'income' ? '#3b82f6' : '#f59e0b'
            }">${tx.category === 'income' ? '+' : '-'}$${tx.amount.toFixed(
            2
          )}</div>
            <div class="meta">${formatDate(tx.date)} ${
            tx.details ? `| ${tx.details}` : ''
          }</div>
          `

          transactionListEl.appendChild(transactionEl)
        })

        const totalBalance = totalIncome - totalExpenses

        totalBalanceEl.textContent = `$${totalBalance.toFixed(2)}`
        totalIncomeEl.textContent = `$${totalIncome.toFixed(2)}`
        totalExpensesEl.textContent = `$${totalExpenses.toFixed(2)}`

        recordCountEl.textContent = `${transactions.length} record${
          transactions.length !== 1 ? 's' : ''
        }`
      }

      // Add new transaction handler
      addExpenseBtn.addEventListener('click', () => {
        const title = expenseTitleInput.value.trim()
        const amount = parseFloat(expenseAmountInput.value)
        const category = expenseCategoryInput.value
        const details = expenseDetailsInput.value.trim()

        if (!title || isNaN(amount) || amount <= 0) {
          alert('Please enter a valid title and amount greater than zero.')
          return
        }

        const transaction = {
          title,
          amount,
          category,
          details,
          date: new Date()
        }

        transactions.unshift(transaction)

        // Save to localStorage
        localStorage.setItem('transactions', JSON.stringify(transactions))

        updateUI()
        clearForm()
        formSection.style.display = 'none'
        toggleFormBtn.style.display = 'block'
      })

      // Initial UI update on page load
      updateUI()
    </script>
  </body>
</html>
